# Diary.md - Дневник технических решений проекта "Восковые ручки"

## Запись от 2024-07-06

### Наблюдения
- Проект требует комплексного подхода к архитектуре из-за множества ролей пользователей
- Необходима тщательная проработка системы безопасности для соответствия 152-ФЗ
- PWA подход позволит обеспечить мобильность и удобство использования
- Интеграция с платежными системами потребует дополнительного времени на согласование

### Решения
1. **Архитектурное решение**: Выбрана микросервисная архитектура с четким разделением ответственности
   - Frontend: React + TypeScript + Material-UI
   - Backend: Node.js + Express + TypeScript
   - Database: PostgreSQL с Prisma/TypeORM
   - Аутентификация: JWT с refresh токенами
   - Уведомления: Email + SMS + Push notifications
   - Чат: WebSocket для общения родителей с администраторами

2. **Безопасность**: Многоуровневая система защиты
   - HTTPS/TLS шифрование
   - Ролевая модель доступа (RBAC)
   - Валидация данных на всех уровнях
   - Логирование действий пользователей

3. **Производительность**: Оптимизация на всех уровнях
   - Code splitting и lazy loading для Frontend
   - Database indexing и query optimization
   - Caching стратегии
   - CDN для статических ресурсов

### Проблемы
1. **Соответствие 152-ФЗ**: Требуется консультация с юристом для правильной реализации защиты персональных данных
2. **Интеграция платежных систем**: Необходимо уточнить требования и возможности API Сбербанка и Тинькофф
3. **Масштабируемость**: При росте количества пользователей может потребоваться оптимизация архитектуры

### Технические детали
- **Версия Node.js**: 18+ (LTS версия для стабильности)
- **Версия React**: 18+ (для поддержки новых возможностей)
- **TypeScript**: strict mode для повышения качества кода
- **PostgreSQL**: версия 14+ с поддержкой JSON и индексов
- **Push Notifications**: Web Push API для браузерных уведомлений
- **WebSocket**: Socket.io для чата в реальном времени

### Следующие шаги
1. Создание базовой структуры проекта
2. Настройка окружения разработки с PostgreSQL
3. Инициализация Git репозитория
4. Создание базовых моделей данных с Prisma/TypeORM
5. Настройка Push notifications
6. Планирование WebSocket архитектуры для чата

---

## Запись от 2024-07-06 (Продолжение)

### Наблюдения
- Структура проекта должна быть модульной для удобства разработки и поддержки
- Необходимо продумать систему миграций для базы данных
- Важно создать единый стиль кодирования для команды

### Решения
1. **Структура проекта**:
   ```
   MKVR/
   ├── frontend/          # React приложение
   ├── backend/           # Node.js API
   ├── shared/            # Общие типы и утилиты
   ├── docs/              # Документация
   └── scripts/           # Скрипты развертывания
   ```

2. **Система миграций**: Использование Mongoose для управления схемами и миграциями

3. **Code Style**: ESLint + Prettier с настройками для TypeScript

### Проблемы
- Необходимо определить точные требования к дизайну интерфейса
- Требуется уточнить бизнес-логику для различных сценариев использования

---

## Архив записей

*Будущие записи будут добавляться здесь с датами*

---

**Последнее обновление**: 2024-07-06  
**Ответственный**: Системный архитектор 